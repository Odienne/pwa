(()=>{"use strict";const e="CSFmpev0utvcW34fpCA1Jk0Z_TC2eW1giCgOXJTxQGo";function s(){const s=$(".js-searchQuery-value").val();if(!s)return;const t="https://api.unsplash.com/search/photos?client_id="+e+`&query=${s}&per_page=9&orientation=squarish`;console.log(navigator.onLine),navigator.onLine?axios.get(t).then((e=>{const t=e.data;localforage.setItem(s,e.data),console.log("save data"),l(t,s)})).catch((e=>console.error("Error while fetching your images",e))):(console.log("fetch local data"),localforage.getItem(s).then((e=>{console.log(e),l(e,s)})))}function l(e,s){let l='<p>Aucun résultat pour la recherche <span class="font-weight-bold">"'+s+'"</span></p>',t="";e.results.length>0&&(l='<p>Voici les résultats de la recherche <span class="font-weight-bold">"'+s+'"</span></p>',e.results.map((e=>{console.log(e.urls.small);let s=e.urls.small.replace("https://images.unsplash.com","");console.log(s),caches.open("images").then((s=>{console.log(s);const l=[];s.keys().then((function(t){console.log(t),e.urls.small===t&&(console.log(t),console.log(e.urls.small===t),e.urls.small===t&&l.push(s.match(t)))})),console.log(l)}));let l=e.urls.small;navigator.onLine||(l=s);let o=new Date(e.created_at);t+='    <div class="col-md-4">\n                <div class="card thumbnail mb-4 shadow-sm">\n                   <img class="img-fluid" src="'+l+'" alt="'+e.description+'">\n                    <div class="card-body">\n                        <p class="card-text ellipsis">'+(e.description?e.description:e.alt_description?e.alt_description:"")+'\n                        </p>\n                        <div class="d-flex justify-content-between align-items-center">\n                            <small class="text-muted">'+o.getDate()+"/"+o.getMonth()+"/"+o.getFullYear()+"</small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n"}))),$("#js-pwa-photos").html(t),$("#js-searchTitle").html(l),$(".pwa-spinner").hide()}$(document).ready((()=>{let e=$(".js-searchQuery");$(".js-searchQuery-value").keypress((s=>13===s.which?e.click():null)),e.on("click",s)}))})();